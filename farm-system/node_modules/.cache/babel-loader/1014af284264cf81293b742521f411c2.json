{"ast":null,"code":"import \"antd/lib/pagination/style\";\nimport _Pagination from \"antd/lib/pagination\";\nimport \"antd/lib/spin/style\";\nimport _Spin from \"antd/lib/spin\";\nimport \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/popconfirm/style\";\nimport _Popconfirm from \"antd/lib/popconfirm\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nvar _jsxFileName = \"E:\\\\\\u5343\\u950B\\u8D44\\u6599\\\\farm\\\\farm-system\\\\src\\\\pages\\\\Section\\\\sectionUpdate.js\";\nimport React, { Component, Fragment } from 'react';\nimport { getSelections, delSection } from '../../api/section';\nimport styles from '../../style/Section.module.less';\nconst pageSize = 3;\n\nclass SectionCreate extends Component {\n  constructor() {\n    super();\n    this.sectionColumns = [// {\n    // \ttitle: '部门编号',\n    // \tdataIndex: '_id',\n    // \tkey: '_id',\n    // },\n    {\n      title: '部门名称',\n      dataIndex: 'name',\n      key: 'name'\n    }, {\n      title: '部门负责人',\n      dataIndex: 'leader',\n      key: 'leader'\n    }, {\n      title: '部门职责',\n      dataIndex: 'duty',\n      key: 'duty'\n    }, {\n      title: '部门人数',\n      dataIndex: 'peopleCount',\n      key: 'peopleCount'\n    }, {\n      title: '部门邮箱',\n      dataIndex: 'email',\n      key: 'email'\n    }, {\n      title: '部门电话',\n      dataIndex: 'phone',\n      key: 'phone'\n    }, {\n      title: '操作',\n      dataIndex: '_id',\n      key: '_id',\n      render: _id => {\n        return React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, React.createElement(_Button, {\n          type: \"primary\",\n          className: styles.btnprimary,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, \"\\u4FEE\\u6539\"), React.createElement(_Popconfirm, {\n          title: \"\\u786E\\u5B9A\\u8981\\u5220\\u9664\\u672C\\u6761\\u6570\\u636E\\u5417\\uFF1F\",\n          onConfirm: () => {\n            // console.log(this, _id)\n            this.delTableData(_id);\n          },\n          okText: \"\\u5220\\u9664\",\n          cancelText: \"\\u53D6\\u6D88\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(_Button, {\n          type: \"danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, \"\\u5220\\u9664\")));\n      }\n    }];\n    this.state = {\n      spinning: false,\n      nowPage: 1,\n      //当前页数\n      allCount: 0,\n      //总数据条数\n      sectionData: []\n    };\n  }\n\n  componentDidMount() {\n    this.getTableData(1);\n  } // 获取数据\n\n\n  getTableData(nowPage) {\n    // 根据页数获取网络数据\n    this.setState({\n      spinning: true\n    });\n    getSelections(nowPage, pageSize).then(res => {\n      // console.log(res)\n      this.setState({\n        sectionData: res.list.sections,\n        allCount: res.list.allCount,\n        spinning: false\n      });\n    });\n  } // 删除数据\n\n\n  delTableData(_id) {\n    //  网络请求\n    delSection(_id).then(() => {\n      _message.success('删除ok', 1); // window.location.reload()\n\n\n      this.getTableData();\n    }); // 更新页面数据\n  }\n\n  render() {\n    let _this$state = this.state,\n        sectionData = _this$state.sectionData,\n        allCount = _this$state.allCount,\n        spinning = _this$state.spinning,\n        nowPage = _this$state.nowPage;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(_Spin, {\n      spinning: spinning,\n      tip: \"Loading...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(_Table, {\n      className: styles.table,\n      dataSource: sectionData,\n      columns: this.sectionColumns,\n      pagination: false,\n      rowKey: \"_id\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    })), React.createElement(_Pagination, {\n      className: styles.antPagination,\n      showQuickJumper: true,\n      total: allCount,\n      pageSize: pageSize,\n      dafaultCurrent: nowPage,\n      onChange: page => {\n        this.getTableData(page);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default SectionCreate;","map":{"version":3,"sources":["E:/千锋资料/farm/farm-system/src/pages/Section/sectionUpdate.js"],"names":["React","Component","Fragment","getSelections","delSection","styles","pageSize","SectionCreate","constructor","sectionColumns","title","dataIndex","key","render","_id","btnprimary","delTableData","state","spinning","nowPage","allCount","sectionData","componentDidMount","getTableData","setState","then","res","list","sections","success","table","antPagination","page"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,aAAT,EAAwBC,UAAxB,QAA0C,mBAA1C;AACA,OAAOC,MAAP,MAAmB,iCAAnB;AAIA,MAAMC,QAAQ,GAAG,CAAjB;;AAEA,MAAMC,aAAN,SAA4BN,SAA5B,CAAsC;AACrCO,EAAAA,WAAW,GAAG;AACb;AACA,SAAKC,cAAL,GAAsB,CACrB;AACA;AACA;AACA;AACA;AACA;AACCC,MAAAA,KAAK,EAAE,MADR;AAECC,MAAAA,SAAS,EAAE,MAFZ;AAGCC,MAAAA,GAAG,EAAE;AAHN,KANqB,EAWrB;AACCF,MAAAA,KAAK,EAAE,OADR;AAECC,MAAAA,SAAS,EAAE,QAFZ;AAGCC,MAAAA,GAAG,EAAE;AAHN,KAXqB,EAgBrB;AACCF,MAAAA,KAAK,EAAE,MADR;AAECC,MAAAA,SAAS,EAAE,MAFZ;AAGCC,MAAAA,GAAG,EAAE;AAHN,KAhBqB,EAqBrB;AACCF,MAAAA,KAAK,EAAE,MADR;AAECC,MAAAA,SAAS,EAAE,aAFZ;AAGCC,MAAAA,GAAG,EAAE;AAHN,KArBqB,EA0BrB;AACCF,MAAAA,KAAK,EAAE,MADR;AAECC,MAAAA,SAAS,EAAE,OAFZ;AAGCC,MAAAA,GAAG,EAAE;AAHN,KA1BqB,EA+BrB;AACCF,MAAAA,KAAK,EAAE,MADR;AAECC,MAAAA,SAAS,EAAE,OAFZ;AAGCC,MAAAA,GAAG,EAAE;AAHN,KA/BqB,EAoCrB;AACCF,MAAAA,KAAK,EAAE,IADR;AAECC,MAAAA,SAAS,EAAE,KAFZ;AAGCC,MAAAA,GAAG,EAAE,KAHN;AAICC,MAAAA,MAAM,EAAEC,GAAG,IAAI;AACd,eACC,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACC;AAAQ,UAAA,IAAI,EAAC,SAAb;AAAuB,UAAA,SAAS,EAAET,MAAM,CAACU,UAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADD,EAEC;AACC,UAAA,KAAK,EAAC,oEADP;AAEC,UAAA,SAAS,EAAE,MAAM;AAChB;AACA,iBAAKC,YAAL,CAAkBF,GAAlB;AACA,WALF;AAMC,UAAA,MAAM,EAAC,cANR;AAOC,UAAA,UAAU,EAAC,cAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WASC;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BATD,CAFD,CADD;AAgBA;AArBF,KApCqB,CAAtB;AA4DA,SAAKG,KAAL,GAAa;AACZC,MAAAA,QAAQ,EAAE,KADE;AAEZC,MAAAA,OAAO,EAAE,CAFG;AAED;AACXC,MAAAA,QAAQ,EAAE,CAHE;AAGA;AACZC,MAAAA,WAAW,EAAE;AAJD,KAAb;AAMA;;AACDC,EAAAA,iBAAiB,GAAG;AACnB,SAAKC,YAAL,CAAkB,CAAlB;AACA,GAxEoC,CAyErC;;;AACAA,EAAAA,YAAY,CAACJ,OAAD,EAAU;AACrB;AACA,SAAKK,QAAL,CAAc;AAAEN,MAAAA,QAAQ,EAAE;AAAZ,KAAd;AACAf,IAAAA,aAAa,CAACgB,OAAD,EAAUb,QAAV,CAAb,CACEmB,IADF,CACQC,GAAD,IAAS;AACd;AACA,WAAKF,QAAL,CAAc;AAAEH,QAAAA,WAAW,EAAEK,GAAG,CAACC,IAAJ,CAASC,QAAxB;AAAkCR,QAAAA,QAAQ,EAAEM,GAAG,CAACC,IAAJ,CAASP,QAArD;AAA+DF,QAAAA,QAAQ,EAAE;AAAzE,OAAd;AACA,KAJF;AAKA,GAlFoC,CAmFrC;;;AACAF,EAAAA,YAAY,CAACF,GAAD,EAAM;AACjB;AACAV,IAAAA,UAAU,CAACU,GAAD,CAAV,CAAgBW,IAAhB,CAAqB,MAAM;AAC1B,eAAQI,OAAR,CAAgB,MAAhB,EAAwB,CAAxB,EAD0B,CAE1B;;;AACA,WAAKN,YAAL;AACA,KAJD,EAFiB,CAQjB;AACA;;AAEDV,EAAAA,MAAM,GAAG;AAAA,sBAC0C,KAAKI,KAD/C;AAAA,QACFI,WADE,eACFA,WADE;AAAA,QACWD,QADX,eACWA,QADX;AAAA,QACqBF,QADrB,eACqBA,QADrB;AAAA,QAC+BC,OAD/B,eAC+BA,OAD/B;AAER,WACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAM,MAAA,QAAQ,EAAED,QAAhB;AAA0B,MAAA,GAAG,EAAC,YAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AACC,MAAA,SAAS,EAAEb,MAAM,CAACyB,KADnB;AAEC,MAAA,UAAU,EAAET,WAFb;AAGC,MAAA,OAAO,EAAE,KAAKZ,cAHf;AAIC,MAAA,UAAU,EAAE,KAJb;AAKC,MAAA,MAAM,EAAC,KALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADD,EASC;AACC,MAAA,SAAS,EAAEJ,MAAM,CAAC0B,aADnB;AAEC,MAAA,eAAe,MAFhB;AAGC,MAAA,KAAK,EAAEX,QAHR;AAIC,MAAA,QAAQ,EAAEd,QAJX;AAKC,MAAA,cAAc,EAAEa,OALjB;AAMC,MAAA,QAAQ,EAAGa,IAAD,IAAU;AACnB,aAAKT,YAAL,CAAkBS,IAAlB;AACA,OARF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATD,CADD;AAqBA;;AAtHoC;;AAwHtC,eAAezB,aAAf","sourcesContent":["import React, { Component, Fragment } from 'react'\r\nimport { getSelections, delSection } from '../../api/section'\r\nimport styles from '../../style/Section.module.less'\r\n\r\nimport { Table, Button, Pagination, Spin, Popconfirm, message } from 'antd'\r\n\r\nconst pageSize = 3;\r\n\r\nclass SectionCreate extends Component {\r\n\tconstructor() {\r\n\t\tsuper()\r\n\t\tthis.sectionColumns = [\r\n\t\t\t// {\r\n\t\t\t// \ttitle: '部门编号',\r\n\t\t\t// \tdataIndex: '_id',\r\n\t\t\t// \tkey: '_id',\r\n\t\t\t// },\r\n\t\t\t{\r\n\t\t\t\ttitle: '部门名称',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\tkey: 'name',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '部门负责人',\r\n\t\t\t\tdataIndex: 'leader',\r\n\t\t\t\tkey: 'leader',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '部门职责',\r\n\t\t\t\tdataIndex: 'duty',\r\n\t\t\t\tkey: 'duty',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '部门人数',\r\n\t\t\t\tdataIndex: 'peopleCount',\r\n\t\t\t\tkey: 'peopleCount',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '部门邮箱',\r\n\t\t\t\tdataIndex: 'email',\r\n\t\t\t\tkey: 'email',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '部门电话',\r\n\t\t\t\tdataIndex: 'phone',\r\n\t\t\t\tkey: 'phone',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '操作',\r\n\t\t\t\tdataIndex: '_id',\r\n\t\t\t\tkey: '_id',\r\n\t\t\t\trender: _id => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t<Button type=\"primary\" className={styles.btnprimary}>修改</Button>\r\n\t\t\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\t\t\ttitle='确定要删除本条数据吗？'\r\n\t\t\t\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\t\t\t\t// console.log(this, _id)\r\n\t\t\t\t\t\t\t\t\tthis.delTableData(_id)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tokText='删除'\r\n\t\t\t\t\t\t\t\tcancelText='取消'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Button type=\"danger\">删除</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t]\r\n\t\tthis.state = {\r\n\t\t\tspinning: false,\r\n\t\t\tnowPage: 1,//当前页数\r\n\t\t\tallCount: 0,//总数据条数\r\n\t\t\tsectionData: [],\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.getTableData(1)\r\n\t}\r\n\t// 获取数据\r\n\tgetTableData(nowPage) {\r\n\t\t// 根据页数获取网络数据\r\n\t\tthis.setState({ spinning: true })\r\n\t\tgetSelections(nowPage, pageSize)\r\n\t\t\t.then((res) => {\r\n\t\t\t\t// console.log(res)\r\n\t\t\t\tthis.setState({ sectionData: res.list.sections, allCount: res.list.allCount, spinning: false })\r\n\t\t\t})\r\n\t}\r\n\t// 删除数据\r\n\tdelTableData(_id) {\r\n\t\t//  网络请求\r\n\t\tdelSection(_id).then(() => {\r\n\t\t\tmessage.success('删除ok', 1)\r\n\t\t\t// window.location.reload()\r\n\t\t\tthis.getTableData()\r\n\t\t})\r\n\r\n\t\t// 更新页面数据\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { sectionData, allCount, spinning, nowPage} = this.state\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Spin spinning={spinning} tip=\"Loading...\">\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={styles.table}\r\n\t\t\t\t\t\tdataSource={sectionData}\r\n\t\t\t\t\t\tcolumns={this.sectionColumns}\r\n\t\t\t\t\t\tpagination={false}\r\n\t\t\t\t\t\trowKey='_id' />\r\n\t\t\t\t</Spin>\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\tclassName={styles.antPagination}\r\n\t\t\t\t\tshowQuickJumper\r\n\t\t\t\t\ttotal={allCount}\r\n\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\tdafaultCurrent={nowPage}\r\n\t\t\t\t\tonChange={(page) => {\r\n\t\t\t\t\t\tthis.getTableData(page)\r\n\t\t\t\t\t}} />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nexport default SectionCreate\r\n"]},"metadata":{},"sourceType":"module"}