{"ast":null,"code":"// localStorage 封装\nexport default {\n  /**\r\n   * 设置 localStorage\r\n   *\r\n   * @param { localStorage名字 } key\r\n   * @param { localStorage值 } value\r\n   * @param { 超时的时间(默认10s) } [duration=10 * 1000]\r\n   */\n  setItem(key, value, duration = 10 * 1000) {\n    let obj = {}; // 将 value 存到对象中\n\n    obj.data = value; // 存入数据的起始时间\n\n    obj.createTime = new Date().getTime(); // 用户输入的持续时间\n\n    obj.duration = duration; // 将存入的对象转换成字符串存入 localStorage\n\n    localStorage.setItem(key, JSON.stringify(obj));\n  },\n\n  /**\r\n   * 取出 localStorage 值\r\n   *\r\n   * @param { localStorage名字 } key\r\n   */\n  getItem(key) {\n    // 将取出的值转为对象\n    let res = JSON.parse(localStorage.getItem(key)); // 如果取出的值为空，终止程序的执行\n\n    if (!res) {\n      return false;\n    } // 获取当前时间\n\n\n    let timeNow = new Date().getTime(); // 如果当前时间 - 起始时间 >= 超时时间，那么删除 localStorage\n\n    if (timeNow - res.createTime >= res.duration) {\n      localStorage.removeItem(key); // 返回空值\n\n      return null;\n    } else {\n      // 返回原数据\n      return res.data;\n    }\n  }\n\n};","map":{"version":3,"sources":["E:/工作区/第三阶段练习/react/farm/farm-system/src/utils/storage.js"],"names":["setItem","key","value","duration","obj","data","createTime","Date","getTime","localStorage","JSON","stringify","getItem","res","parse","timeNow","removeItem"],"mappings":"AAAA;AAEA,eAAe;AACX;;;;;;;AAOAA,EAAAA,OAAO,CAAEC,GAAF,EAAOC,KAAP,EAAcC,QAAQ,GAAG,KAAK,IAA9B,EAAoC;AACvC,QAAIC,GAAG,GAAG,EAAV,CADuC,CAEvC;;AACAA,IAAAA,GAAG,CAACC,IAAJ,GAAWH,KAAX,CAHuC,CAIvC;;AACAE,IAAAA,GAAG,CAACE,UAAJ,GAAiB,IAAIC,IAAJ,GAAWC,OAAX,EAAjB,CALuC,CAMvC;;AACAJ,IAAAA,GAAG,CAACD,QAAJ,GAAeA,QAAf,CAPuC,CAQvC;;AACAM,IAAAA,YAAY,CAACT,OAAb,CAAqBC,GAArB,EAA0BS,IAAI,CAACC,SAAL,CAAeP,GAAf,CAA1B;AACH,GAlBU;;AAmBX;;;;;AAKAQ,EAAAA,OAAO,CAAEX,GAAF,EAAO;AACV;AACA,QAAIY,GAAG,GAAGH,IAAI,CAACI,KAAL,CAAWL,YAAY,CAACG,OAAb,CAAqBX,GAArB,CAAX,CAAV,CAFU,CAGV;;AACA,QAAI,CAACY,GAAL,EAAU;AACN,aAAO,KAAP;AACH,KANS,CAOV;;;AACA,QAAIE,OAAO,GAAG,IAAIR,IAAJ,GAAWC,OAAX,EAAd,CARU,CASV;;AACA,QAAIO,OAAO,GAAGF,GAAG,CAACP,UAAd,IAA4BO,GAAG,CAACV,QAApC,EAA8C;AAC1CM,MAAAA,YAAY,CAACO,UAAb,CAAwBf,GAAxB,EAD0C,CAE1C;;AACA,aAAO,IAAP;AACH,KAJD,MAIO;AACH;AACA,aAAOY,GAAG,CAACR,IAAX;AACH;AACJ;;AA1CU,CAAf","sourcesContent":["// localStorage 封装\r\n\r\nexport default {\r\n    /**\r\n     * 设置 localStorage\r\n     *\r\n     * @param { localStorage名字 } key\r\n     * @param { localStorage值 } value\r\n     * @param { 超时的时间(默认10s) } [duration=10 * 1000]\r\n     */\r\n    setItem (key, value, duration = 10 * 1000) {\r\n        let obj = {}\r\n        // 将 value 存到对象中\r\n        obj.data = value\r\n        // 存入数据的起始时间\r\n        obj.createTime = new Date().getTime()\r\n        // 用户输入的持续时间\r\n        obj.duration = duration\r\n        // 将存入的对象转换成字符串存入 localStorage\r\n        localStorage.setItem(key, JSON.stringify(obj))\r\n    },\r\n    /**\r\n     * 取出 localStorage 值\r\n     *\r\n     * @param { localStorage名字 } key\r\n     */\r\n    getItem (key) {\r\n        // 将取出的值转为对象\r\n        let res = JSON.parse(localStorage.getItem(key))\r\n        // 如果取出的值为空，终止程序的执行\r\n        if (!res) {\r\n            return false\r\n        }\r\n        // 获取当前时间\r\n        let timeNow = new Date().getTime()\r\n        // 如果当前时间 - 起始时间 >= 超时时间，那么删除 localStorage\r\n        if (timeNow - res.createTime >= res.duration) {\r\n            localStorage.removeItem(key)\r\n            // 返回空值\r\n            return null\r\n        } else {\r\n            // 返回原数据\r\n            return res.data\r\n        }\r\n    },\r\n}\r\n"]},"metadata":{},"sourceType":"module"}